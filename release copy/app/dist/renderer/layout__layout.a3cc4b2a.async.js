"use strict";(self.webpackChunkibp=self.webpackChunkibp||[]).push([[875],{56946:function(Nt,G,a){a.r(G),a.d(G,{default:function(){return pt}});var le=a(42122),w=a.n(le),ce=a(27424),A=a.n(ce),ue=a(8812),de=a(67724),j=a(3227),ve=a(80226),m=a(67294),W=a(55105),he={header:"header___gN5CC"},me=a.p+"static/logoTitle.dc1fae1a.png",k={leftContent:"leftContent___FROTI",logo:"logo___yV8qB"},e=a(85893),fe=function(){return(0,e.jsx)("div",{className:k.leftContent,children:(0,e.jsx)("img",{className:k.logo,src:me,alt:"logo"})})},ge=fe,pe=a(861),xe=a.n(pe),ye=a(17061),X=a.n(ye),Ce=a(17156),je=a.n(Ce),Me=a(89366),Ne=a(24616),Se=a(55035),J=a(11382),b=a(27124),Q=a(51890),Te=a(17673),we=a(70215),Ae=a.n(we),Ie=a(13013),Be=a(94184),F=a.n(Be),Ze={container:"container___ZwI9w"},De=["overlayClassName"],Fe=function(t){var o=t.overlayClassName,r=Ae()(t,De);return(0,e.jsx)(Ie.Z,w()({overlayClassName:F()(Ze.container,o)},r))},Y=Fe,I={action:"action___A64Z6",search:"search___s6ijA",account:"account___WG1Ug",avatar:"avatar___VsTEv"},q=(0,e.jsx)("span",{className:"".concat(I.action," ").concat(I.account),children:(0,e.jsx)(J.Z,{size:"small",style:{marginLeft:8,marginRight:8}})}),Ee=function(){var u=je()(X()().mark(function t(){var o,r,n,s,v;return X()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:o=j.history.location,r=o.search,n=o.pathname,s=new URL(window.location.href).searchParams,v=s.get("redirect"),window.location.pathname!=="/login"&&!v&&j.history.replace({pathname:"/login",search:(0,Te.stringify)({redirect:n+r})});case 4:case"end":return c.stop()}},t)}));return function(){return u.apply(this,arguments)}}(),Re=function(t){var o=t.menu,r=(0,j.useModel)("@@initialState"),n=r.initialState,s=r.setInitialState,v=(0,m.useCallback)(function(f){var g=f.key;if(g==="logout"){s(function(p){return w()(w()({},p),{},{currentUser:void 0})}),Ee();return}j.history.push("/account/".concat(g))},[s]);if(!n)return q;var d=n.currentUser;if(!d||!d.name)return q;var c=[].concat(xe()(o?[{key:"center",icon:(0,e.jsx)(Me.Z,{}),label:"\u4E2A\u4EBA\u4E2D\u5FC3"},{key:"settings",icon:(0,e.jsx)(Ne.Z,{}),label:"\u4E2A\u4EBA\u8BBE\u7F6E"},{type:"divider"}]:[]),[{key:"logout",icon:(0,e.jsx)(Se.Z,{}),label:"\u9000\u51FA\u767B\u5F55"}]),y=(0,e.jsx)(b.Z,{className:I.menu,selectedKeys:[],onClick:v,items:c});return(0,e.jsx)(Y,{overlay:y,children:(0,e.jsxs)("span",{className:"".concat(I.action," ").concat(I.account),children:[(0,e.jsx)(Q.C,{size:"small",className:I.avatar,src:d.avatar,alt:"avatar"}),(0,e.jsx)("span",{className:"".concat(I.name," anticon"),children:d.name})]})})},Ve=Re,Le=a(60331),_=a(48086),Pe=a(96486),be=a(30381),Ue=a.n(be),B={popover:"popover___nX6IG",noticeButton:"noticeButton___spGDh",icon:"icon___yewTJ",badge:"badge___ivebr",tabs:"tabs___sXjCG"},Oe=a(89317),ee=a(51752),He=a(79166),Ke=a(21770),ze=a(38416),$e=a.n(ze),U=a(36992),S={list:"list___dHjnm",item:"item___OEbLd",meta:"meta___jweGN",avatar:"avatar___ymaND",iconElement:"iconElement___KFnTS",read:"read___WzGya",title:"title___aR6yq",description:"description___XI118",datetime:"datetime___St4yT",extra:"extra___MjzH3",loadMore:"loadMore___I7b19",loadedAll:"loadedAll___i_03E",notFound:"notFound___A8VPr",bottomBar:"bottomBar___u1X2e"},Ge=function(t){var o=t.list,r=o===void 0?[]:o,n=t.onClick,s=t.onClear,v=t.title,d=t.onViewMore,c=t.emptyText,y=t.showClear,f=y===void 0?!0:y,g=t.clearText,p=t.viewMoreText,N=t.showViewMore,M=N===void 0?!1:N;return!r||r.length===0?(0,e.jsxs)("div",{className:S.notFound,children:[(0,e.jsx)("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/sAuJeJzSKbUmHfBQRzmZ.svg",alt:"not found"}),(0,e.jsx)("div",{children:c})]}):(0,e.jsxs)("div",{children:[(0,e.jsx)(U.ZP,{className:S.list,dataSource:r,renderItem:function(i,C){var h=F()(S.item,$e()({},S.read,i.read)),T=i.avatar?typeof i.avatar=="string"?(0,e.jsx)(Q.C,{className:S.avatar,src:i.avatar}):(0,e.jsx)("span",{className:S.iconElement,children:i.avatar}):null;return(0,e.jsx)("div",{onClick:function(){n==null||n(i)},children:(0,e.jsx)(U.ZP.Item,{className:h,children:(0,e.jsx)(U.ZP.Item.Meta,{className:S.meta,avatar:T,title:(0,e.jsxs)("div",{className:S.title,children:[i.title,(0,e.jsx)("div",{className:S.extra,children:i.extra})]}),description:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:S.description,children:i.description}),(0,e.jsx)("div",{className:S.datetime,children:i.datetime})]})})},i.key||C)})}}),(0,e.jsxs)("div",{className:S.bottomBar,children:[f?(0,e.jsxs)("div",{onClick:s,children:[g," ",v]}):null,M?(0,e.jsx)("div",{onClick:function(i){d&&d(i)},children:p}):null]})]})},te=Ge,We=ee.Z.TabPane,O=function(t){var o=function(){var l=t.children,i=t.loading,C=t.onClear,h=t.onTabChange,T=t.onItemClick,x=t.onViewMore,D=t.clearText,xt=t.viewMoreText;if(!l)return null;var re=[];return m.Children.forEach(l,function(V){if(!!V){var Z=V.props,L=Z.list,P=Z.title,K=Z.count,z=Z.tabKey,yt=Z.showClear,Ct=Z.showViewMore,jt=L&&L.length?L.length:0,ie=K||K===0?K:jt,Mt=ie>0?"".concat(P," (").concat(ie,")"):P;re.push((0,e.jsx)(We,{tab:Mt,children:(0,e.jsx)(te,{clearText:D,viewMoreText:xt,list:L,tabKey:z,onClear:function(){return C&&C(P,z)},onClick:function($){return T&&T($,V.props)},onViewMore:function($){return x&&x(V.props,$)},showClear:yt,showViewMore:Ct,title:P})},z))}}),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(J.Z,{spinning:i,delay:300,children:(0,e.jsx)(ee.Z,{className:B.tabs,onChange:h,children:re})})})},r=t.className,n=t.count,s=t.bell,v=(0,Ke.Z)(!1,{value:t.popupVisible,onChange:t.onPopupVisibleChange}),d=A()(v,2),c=d[0],y=d[1],f=F()(r,B.noticeButton),g=o(),p=s||(0,e.jsx)(Oe.Z,{className:B.icon}),N=(0,e.jsx)("span",{className:F()(f,{opened:c}),children:(0,e.jsx)(He.Z,{count:n,style:{boxShadow:"none"},className:B.badge,children:p})});return g?(0,e.jsx)(Y,{placement:"bottomRight",overlay:g,overlayClassName:B.popover,trigger:["click"],visible:c,onVisibleChange:y,getPopupContainer:function(){return document.getElementById("rightContent")},children:N}):N};O.defaultProps={emptyImage:"https://gw.alipayobjects.com/zos/rmsportal/wAhyIChODzsoKIOBHcBk.svg"},O.Tab=te;var E=O,ke=function(t){if(!t||t.length===0||!Array.isArray(t))return{};var o=t.map(function(r){var n=w()({},r);if(n.datetime&&(n.datetime=Ue()(r.datetime).fromNow()),n.id&&(n.key=n.id),n.extra&&n.status){var s={todo:"",processing:"blue",urgent:"red",doing:"gold"}[n.status];n.extra=(0,e.jsx)(Le.Z,{color:s,style:{marginRight:0},children:n.extra})}return n});return(0,Pe.groupBy)(o,"type")},Xe=function(t){var o={};return Object.keys(t).forEach(function(r){var n=t[r];o[r]||(o[r]=0),Array.isArray(n)&&(o[r]=n.filter(function(s){return!s.read}).length)}),o},Je=function(){var t=(0,j.useModel)("@@initialState"),o=t.initialState,r=o||{},n=r.currentUser,s=(0,m.useState)([]),v=A()(s,2),d=v[0],c=v[1],y=[],f=ke(d),g=Xe(f||{}),p=function(l){c(d.map(function(i){var C=w()({},i);return C.id===l&&(C.read=!0),C}))},N=function(l,i){c(d.map(function(C){var h=w()({},C);return h.type===i&&(h.read=!0),h})),_.ZP.success("\u6E05\u7A7A\u4E86".concat(" ",l))};return(0,e.jsxs)(E,{className:B.action,count:n&&n.unreadCount,onItemClick:function(l){p(l.id)},onClear:function(l,i){return N(l,i)},loading:!1,clearText:"\u6E05\u7A7A",viewMoreText:"\u67E5\u770B\u66F4\u591A",onViewMore:function(){return _.ZP.info("Click on view more")},clearClose:!0,children:[(0,e.jsx)(E.Tab,{tabKey:"notification",count:g.notification,list:f.notification,title:"\u901A\u77E5",emptyText:"\u4F60\u5DF2\u67E5\u770B\u6240\u6709\u901A\u77E5",showViewMore:!0}),(0,e.jsx)(E.Tab,{tabKey:"message",count:g.message,list:f.message,title:"\u6D88\u606F",emptyText:"\u60A8\u5DF2\u8BFB\u5B8C\u6240\u6709\u6D88\u606F",showViewMore:!0}),(0,e.jsx)(E.Tab,{tabKey:"event",title:"\u5F85\u529E",emptyText:"\u4F60\u5DF2\u5B8C\u6210\u6240\u6709\u5F85\u529E",count:g.event,list:f.event,showViewMore:!0})]})},Qe=Je,Ye=a(19650),qe=a(12028),_e={rightContent:"rightContent___bCxhn"},ae=a(18037),ne={dark:{"--border-color":"rgba(255,255,255,.12)"},light:{"--border-color":"#f0f0f0"}},et=function(t){var o=t.watch,r=o===void 0?!0:o,n=t.variables,s=t.onlyLegacy,v=s===void 0?!0:s;(0,ae.Z)({watch:r,variables:n,onlyLegacy:v})},tt=function(){(0,ae.Z)({watch:!0,variables:ne.light,onlyLegacy:!0})},at=function(){var t=(0,j.useModel)("@@initialState"),o=t.initialState,r=t.setInitialState,n=(0,m.useState)(!1),s=A()(n,2),v=s[0],d=s[1],c=(0,W.E)(),y=c.switcher,f=c.currentTheme,g=c.status,p=c.themes,N=function(l){d(l),r(w()(w()({},o),{},{theme:l?"dark":"light"})),y({theme:l?p.dark:p.light}),et({watch:!0,onlyLegacy:!0,variables:ne[l?p.dark:p.light]})};return(0,e.jsx)("div",{className:_e.rightContent,id:"rightContent",children:(0,e.jsxs)(Ye.Z,{children:[(0,e.jsx)(Qe,{}),(0,e.jsx)(Ve,{}),(0,e.jsx)(qe.Z,{checked:v,onChange:N,checkedChildren:"\u{1F31B}",unCheckedChildren:"\u{1F31E}"})]})})},nt=at,ot=function(){return(0,e.jsxs)("div",{className:he.header,children:[(0,e.jsx)(ge,{}),(0,e.jsx)("div",{style:{flex:1}}),(0,e.jsx)(nt,{})]})},rt=ot,R={container:"container___vlo7c",content:"content___qWC1v",pageContainer:"pageContainer___um0W1",collapsedBtn:"collapsedBtn___pwYaA",aniShow:"aniShow___ikiNU",aniHide:"aniHide___GnIVn"},it=a(6590),st=a(27049),lt=[{path:"/",redirect:"/home"},{exact:!1,path:"/",component:"@/layout/layout",routes:[{path:"/login",layout:!1,name:"\u767B\u5F55",component:"./Login",menuRender:!1},{path:"/home",name:"\u9996\u9875",icon:"HomeFilled",component:"./Home"},{path:"/userAuthManage",icon:"AppstoreFilled",name:"\u7528\u6237\u53CA\u6743\u9650\u7BA1\u7406",access:"canAdmin",routes:[{name:"\u7528\u6237\u7BA1\u7406",path:"/userAuthManage/userManage",component:"./UserAuthManage/UserManage"},{name:"\u89D2\u8272\u7BA1\u7406",path:"/userAuthManage/roleManage",component:"./UserAuthManage/RoleManage"},{name:"\u6743\u9650\u7BA1\u7406",path:"/userAuthManage/authManage",component:"./UserAuthManage/AuthManage"},{name:"\u83DC\u5355\u7BA1\u7406",path:"/userAuthManage/menuMange",component:"./UserAuthManage/MenuMange"}]},{path:"/userNetDisk",name:"\u4E2A\u4EBA\u7F51\u76D8",icon:"CloudFilled",component:"./UserNetDisk"},{path:"/projectDocument",name:"\u9879\u76EE\u6587\u6863",icon:"FileTextFilled",component:"./ProjectDocument"},{path:"/projectDraft",name:"\u9879\u76EE\u5E95\u7A3F",icon:"FolderFilled",component:"./ProjectDraft"},{path:"/knowledgeBase",name:"\u77E5\u8BC6\u5E93",icon:"BookFilled",component:"./KnowledgeBase"},{path:"/transmissionList",component:"./TransmissionList",name:"\u4F20\u8F93\u5217\u8868",icon:"ProfileFilled",showInMenuBottom:!0},{path:"/setting",component:"./Setting",name:"\u7CFB\u7EDF\u8BBE\u7F6E",icon:"SettingFilled",showInMenuBottom:!0},{path:"*",hideInMenu:!0,component:"./404"}]},{path:"*",component:"./404"}],ct={sider:"sider____Au_a"};function H(u,t,o,r,n){return{key:t,icon:o,children:r,label:u,type:n}}var oe=function(t){return Array.isArray(t)&&t.length?t.map(function(o){if(typeof o.icon=="string"&&(o.icon=m.createElement(it[o.icon])),Array.isArray(o.routes)){var r=o.routes.map(function(n){return H(n.name,n.path,n.icon)});return H(o.name,o.path,o.icon,r)}return H(o.name,o.path,o.icon)}):[]},ut=function(t){var o=t.collapsed,r=(0,j.useModel)("@@initialState"),n=r.initialState,s=(0,m.useState)(""),v=A()(s,2),d=v[0],c=v[1],y=(0,j.useLocation)(),f=y.pathname;(0,m.useEffect)(function(){c(f)},[f]);var g=(0,m.useMemo)(function(){var l,i,C=(l=lt.find(function(x){return x.component==="@/layout/layout"}))===null||l===void 0||(i=l.routes)===null||i===void 0?void 0:i.filter(function(x){return!x.hideInMenu&&x.menuRender!==!1}),h=[],T=[];return C==null||C.forEach(function(x){x.showInMenuBottom?T.push(x):h.push(x)}),[h,T]},[]),p=(0,m.useMemo)(function(){return oe(g[0]||[])},[]),N=(0,m.useMemo)(function(){return oe(g[1]||[])},[]),M=function(i){j.history.push(i.key)};return(0,e.jsxs)("div",{className:ct.sider,style:{width:o?"66px":"200px"},children:[(0,e.jsx)(b.Z,{theme:n==null?void 0:n.theme,onClick:M,selectedKeys:[d],inlineCollapsed:o,mode:"inline",items:p}),(0,e.jsx)(st.Z,{}),(0,e.jsx)(b.Z,{theme:n==null?void 0:n.theme,onClick:M,selectedKeys:[d],inlineCollapsed:o,mode:"inline",items:N})]})},dt=ut;function vt(){var u=(0,m.useState)(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),t=A()(u,2),o=t[0],r=t[1];return(0,m.useEffect)(function(){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",function(n){n.matches?r("dark"):r("light")})},[]),{themeName:o,isDarkMode:o==="dark",isLightMode:o==="light"}}var ht=vt,mt=a(59134),ft=a.n(mt),gt={dark:"styles/dark-theme.css",light:"styles/light-theme.css"},pt=function(){var u=(0,j.useModel)("@@initialState"),t=u.initialState,o=u.setInitialState,r=(0,m.useState)(!1),n=A()(r,2),s=n[0],v=n[1],d=(0,m.useState)(!1),c=A()(d,2),y=c[0],f=c[1],g=ht(),p=g.themeName,N=(0,j.useAppData)(),M=N.routes,l=(0,j.useLocation)(),i=l.pathname;(0,m.useEffect)(function(){var h,T=[];try{T=Object.values(M)}catch(D){console.log(D)}var x=(h=T)===null||h===void 0?void 0:h.find(function(D){return D.path===i});x&&(x.menuRender===void 0?y||f(!0):x.menuRender!==y&&f(x.menuRender))},[i,y]),(0,m.useEffect)(function(){ft()()||o(w()(w()({},t),{},{theme:p}))},[p]),(0,m.useEffect)(function(){tt()},[]),(0,m.useEffect)(function(){var h=function(){window.innerWidth<=1e3&&(s||v(!0))};return h(),window.addEventListener("resize",h),function(){window.removeEventListener("resize",h)}},[]);var C=function(){v(!s)};return(0,e.jsx)(W.c,{themeMap:gt,defaultTheme:t==null?void 0:t.theme,children:(0,e.jsx)("div",{className:R.container,children:y?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(rt,{}),(0,e.jsxs)("div",{className:R.content,children:[(0,e.jsx)(dt,{collapsed:s}),(0,e.jsxs)("div",{className:R.pageContainer,children:[(0,e.jsx)(ve.Z,{type:"primary",className:R.collapsedBtn,onClick:C,children:s?(0,e.jsx)(ue.Z,{}):(0,e.jsx)(de.Z,{})}),(0,e.jsx)(j.Outlet,{})]})]})]}):(0,e.jsx)(j.Outlet,{})})})}}}]);
